<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CPX Research Widget Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <h2>Earn Money with Surveys (CPX Research Demo)</h2>
    <div style="max-width: 950px; margin: auto" id="fullscreen"></div>
    <div style="width: 100%; height: 150px;" id="single"></div>
    <div id="sidebar" style="height: 469px"></div>
    <div id="notification" style="height: 469px"></div>
    <div id="notification2" style="height: 469px"></div>

    <script>
    // CPX Research Configuration
    const script1 = {
        div_id: "fullscreen",
        theme_style: 1,
        order_by: 2,
        limit_surveys: 7
    };
    const script2 = {
        div_id: "sidebar",
        theme_style: 1,
        order_by: 1,
    };
    const script3 = {
        div_id: "single",
        theme_style: 3,
        display_mode: 1
    };
    const script4 = {
        div_id: "notification",
        theme_style: 4,
        position: 5,
        text: "",
        link: "",
        newtab: true
    };
    const script5 = {
        div_id: "notification2",
        theme_style: 4,
        position: 6,
        text: "",
        link: "https://wall.cpx-research.com/index.php?app_id=28194&ext_user_id=social_media_manager_user",
        newtab: true
    };
    const config = {
        general_config: {
            app_id: 28194,
            ext_user_id: "social_media_manager_user",
            postback_url: "https://webhook.site/4f7df42b-410e-4dce-9cbf-70c2b864ba87?status={status}&trans_id={trans_id}",
        },
        style_config: {
            text_color: "#2b2b2b",
            survey_box: {
                topbar_background_color: "#ffaf20",
                box_background_color: "white",
                rounded_borders: true,
                stars_filled: "black",
            },
        },
        script_config: [script1, script2, script3, script4, script5],
        debug: false,
        useIFrame: true,
        iFramePosition: 1,
        functions: {
            no_surveys_available: () => {
                console.log("no surveys available function here");
            },
            count_new_surveys: (countsurveys) => {
                console.log("count surveys function here, count:", countsurveys);
            },
            get_all_surveys: (surveys) => {
                console.log("get all surveys function here, surveys: ", surveys);
            },
            get_transaction: (transactions) => {
                console.log("transaction function here, transaction: ", transactions);
                if (transactions && transactions.length > 0) {
                    fetch(config.general_config.postback_url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            user_id: config.general_config.ext_user_id,
                            transactions: transactions,
                            timestamp: new Date().toISOString()
                        })
                    }).catch(error => console.log('Postback error:', error));
                }
            }
        }
    };
    window.config = config;
    </script>
    <script type="text/javascript" src="https://cdn.cpx-research.com/assets/js/script_tag_v2.0.js"></script>
</body>
</html> 